(this["webpackJsonpmy-reads"]=this["webpackJsonpmy-reads"]||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(23),s=n.n(c),r=n(9),o=(n(30),n(4)),i=n(5),l=n.n(i),u=n(14),h=n(10),d=n(11),j=n(13),b=n(12),f=n(2),p=(n(32),n(33),n(34),n(0)),v=function(e){var t=e.shelves,n=e.getAllBooks;return Object(p.jsx)("header",{children:Object(p.jsxs)("nav",{children:[Object(p.jsx)("div",{className:"logo",children:Object(p.jsx)("i",{className:"fas fa-book-reader"})}),Object(p.jsxs)("ul",{children:[t.map((function(e){return Object(p.jsx)("li",{children:Object(p.jsx)(r.b,{to:e.id,onClick:n,children:e.title})},e.id)})),Object(p.jsx)("li",{children:Object(p.jsx)(r.b,{to:"/search",children:"Search"})})]})]})})},O=(n(41),n(42),function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={selected:!1},e.selectedClass=function(){var t=Object(u.a)(l.a.mark((function t(n,a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selected:!0}),t.next=3,e.props.onUpdate(n,a);case 3:e.setState({selected:!1});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.state={},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.book,a=t.shelves,c=t.toggleClass,s=t.activeClass,r=n.id,o=n.title,i=n.shelf,l=n.authors,u=n.imageLinks;return Object(p.jsxs)("div",{className:"book",children:[Object(p.jsx)("div",{className:"book-cover",children:Object(p.jsx)("img",{alt:o,src:u&&u.thumbnail||"https://cdn.pixabay.com/photo/2017/02/26/21/39/rose-2101475_1280.jpg"})}),Object(p.jsx)("div",{className:"book-title",children:Object(p.jsx)("h3",{children:o})}),Object(p.jsx)("div",{className:"book-authors",children:l&&l.map((function(e,t){return Object(p.jsxs)("span",{children:[e," ",Object(p.jsx)("br",{})]},t)}))}),Object(p.jsxs)("div",{className:"book-shelves ".concat(s&&"active"," ").concat(this.state.selected&&"active"),children:[Object(p.jsx)("div",{className:"loading ".concat(this.state.selected&&"selected"," "),children:Object(p.jsx)("div",{})}),Object(p.jsxs)("div",{className:"box",children:[Object(p.jsx)("h4",{children:Object(p.jsx)("span",{children:"Move To"})}),a.map((function(t){return t.id===i?Object(p.jsx)("div",{className:"book-shelf active",children:Object(p.jsx)("span",{children:t.title})},t.id):Object(p.jsx)("div",{className:"book-shelf",onClick:function(){return e.selectedClass(n,t.id)},children:Object(p.jsx)("span",{children:t.title})},t.id)})),Object(p.jsx)("div",{className:"book-shelf ".concat((void 0===i||"none"===i)&&"active"),onClick:function(){return e.selectedClass(n,"none")},children:Object(p.jsx)("span",{children:"None"})})]})]}),Object(p.jsx)("div",{className:"drop-down ".concat(s&&"active"),onClick:function(){return c(r)},children:Object(p.jsx)("i",{className:"fas fa-chevron-circle-down"})})]})}}]),n}(a.Component)),x=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={active:!1,bookId:0,status:!1},e.toggleClass=function(t){e.state.bookId===t?e.setState({active:!1,bookId:0,status:!1}):e.setState({active:!0,bookId:t,status:!0})},e}return Object(d.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,a=n.books,c=n.onUpdate,s=n.shelves,r=n.location,o=!1,i=r.pathname.split("/")[1];return e="search"!==i?s.filter((function(e){return a[0]&&e.id!==a[0].shelf})):s,Object(p.jsx)("div",{className:"content",children:a.map((function(n){return o=!(!t.state.status||n.id!==t.state.bookId),Object(p.jsx)(O,{book:n,onUpdate:c,shelves:e,toggleClass:t.toggleClass,activeClass:o},n.id)}))})}}]),n}(a.Component),k=n(25),m=n(17),g="https://reactnd-books-api.udacity.com",y=localStorage.token;y||(y=localStorage.token=Math.random().toString(36).substr(-8));var S={Accept:"application/json",Authorization:y},C=function(){return fetch("".concat(g,"/books"),{headers:S}).then((function(e){return e.json()})).then((function(e){return e.books}))},N=function(e,t){return fetch("".concat(g,"/books/").concat(e.id),{method:"PUT",headers:Object(o.a)(Object(o.a)({},S),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},w=function(e){return fetch("".concat(g,"/search"),{method:"POST",headers:Object(o.a)(Object(o.a)({},S),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},A=(n(43),function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={searchBooks:[],query:""},e.handleChange=function(t){var n=t.target,a=n.name,c=n.value;e.setState(Object(m.a)({},a,c),(function(){e.handleSearch()}))},e.handleSearch=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.query.trim(),t.prev=1,t.t0=n,!t.t0){t.next=6;break}return t.next=6,w(n).then((function(t){return Array.isArray(t)?e.handleShelf(t):e.handleShelf}));case 6:t.next=11;break;case 8:t.prev=8,t.t1=t.catch(1),console.log(t.t1);case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.handleShelf=function(t){var n,a=e.props.books,c=Object(k.a)(a);try{var s=function(){var e=n.value,a=t.find((function(t){return t.id===e.id}));if(a){var c=t.indexOf(a);t[c]=Object(o.a)(Object(o.a)({},t[c]),{},{shelf:e.shelf})}};for(c.s();!(n=c.n()).done;)s()}catch(r){c.e(r)}finally{c.f()}e.setState({searchBooks:t})},e.updateShelf=function(){var t=Object(u.a)(l.a.mark((function t(n,a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(n,a);case 2:e.addShelfToState(n,a);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.addShelfToState=function(t,n){var a=e.state.searchBooks,c=a.indexOf(t);a[c]=Object(o.a)(Object(o.a)({},a[c]),{},{shelf:n}),e.setState({searchBooks:a})},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state.searchBooks,t=this.props,n=t.shelves,a=t.location;return Object(p.jsxs)("div",{className:"search-books",children:[Object(p.jsx)("div",{className:"search-input",children:Object(p.jsx)("input",{type:"text",placeholder:"Search by title or author",name:"query",value:this.state.query,onChange:this.handleChange})}),Object(p.jsx)("div",{className:"search-results",children:this.state.query&&Array.isArray(e)&&Object(p.jsx)(x,{books:e,onUpdate:this.updateShelf,shelves:n,location:a})})]})}}]),n}(a.Component)),B=Object(f.g)(A),T=function(e){var t=e.books,n=e.shelves,a=e.onUpdate,c=e.getAllBooks;return Object(p.jsxs)("div",{className:"book-list",children:[Object(p.jsx)(v,{shelves:n,getAllBooks:c}),Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)(f.d,{children:[Object(p.jsx)(f.b,{path:"/search",component:function(){return Object(p.jsx)(B,{books:t,shelves:n})}}),n.map((function(e){var c=t.filter((function(t){return t.shelf===e.id})),s="/".concat(e.id);return Object(p.jsx)(f.b,{path:s,render:function(e){return Object(p.jsx)(x,Object(o.a)({books:c,onUpdate:a,shelves:n},e))}},e.id)}))]})})]})},q=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={books:[],query:"Hello"},e.getAllBooks=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C().then((function(t){return e.setState({books:t})}));case 2:case"end":return t.stop()}}),t)}))),e.updateShelf=function(){var t=Object(u.a)(l.a.mark((function t(n,a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(n,a);case 2:e.getAllBooks();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.changeQuery=function(t){console.log(t);var n=Object(o.a)({},e.state);e.setState(Object(o.a)(Object(o.a)({},n),{},{query:t}))},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.getAllBooks()}},{key:"render",value:function(){var e=this,t=[{title:"Currently Reading",id:"currentlyReading"},{title:"Want To Read",id:"wantToRead"},{title:"Read",id:"read"}];return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(f.b,{path:"/",render:function(){return Object(p.jsx)(T,{books:e.state.books,shelves:t,onUpdate:e.updateShelf,getAllBooks:e.getAllBooks})}}),Object(p.jsx)(f.a,{from:"/",to:"/currentlyReading"})]})}}]),n}(a.Component),U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};n(44);s.a.render(Object(p.jsx)(r.a,{children:Object(p.jsx)(q,{})}),document.getElementById("root")),U()}},[[45,1,2]]]);
//# sourceMappingURL=main.4a786f9b.chunk.js.map